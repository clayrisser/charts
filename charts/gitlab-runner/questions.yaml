categories:
  - Server
questions:

# Config
  - variable: gitlabRunner.imagePullPolicy
    default: IfNotPresent
    description: ''
    type: enum
    options:
      - IfNotPresent
      - Always
    required: true
    label: 'pull policy'
    group: Config
  - variable: gitlabRunner.logLevel
    default: info
    description: ''
    type: enum
    options:
      - debug
      - info
      - warn
      - error
      - fatal
      - panic
    required: true
    label: 'log level'
    group: Config
  - variable: gitlabRunner.gitlabUrl
    default: ''
    description: ''
    type: string
    required: true
    label: 'gitlab url'
    group: Config
  - variable: gitlabRunner.runnerRegistrationToken
    default: ''
    description: ''
    type: password
    required: true
    label: 'registration token'
    group: Config
  # - variable: gitlabRunner.metrics.enabled
  #   default: false
  #   description: ''
  #   type: boolean
  #   required: true
  #   label: 'metrics enabled'
  #   group: Config

# Runners
  - variable: gitlabRunner.runners.image
    default: docker:19.03.1
    description: ''
    type: string
    required: true
    label: image
    group: Runners
  - variable: gitlabRunner.runners.requestConcurrency
    default: 1
    description: ''
    type: int
    required: true
    label: 'request concurrency'
    group: Runners

# Persistence
  - variable: gitlabRunner.persistence.enabled
    default: false
    description: ''
    type: boolean
    required: true
    label: enabled
    show_subquestion_if: true
    group: Persistence
    subquestions:
      - variable: gitlabRunner.persistence.size
        default: 1Gi
        description: ''
        type: string
        required: true
        label: size
      - variable: gitlabRunner.persistence.storageClass
        default: ''
        description: ''
        type: storageclass
        required: false
        label: 'storage class'
      - variable: gitlabRunner.persistence.accessMode
        default: ReadWriteOnce
        description: ''
        type: enum
        options:
          - ReadWriteOnce
          - ReadWriteMany
          - ReadOnlyMany
        required: false
        label: 'access mode'
      - variable: gitlabRunner.persistence.existingClaim
        default: ''
        description: ''
        type: string
        required: false
        label: 'existing claim'
      - variable: gitlabRunner.persistence.velero.enabled
        default: false
        description: ''
        type: boolean
        required: true
        label: 'velero enabled'
      - variable: gitlabRunner.persistence.stash.enabled
        default: false
        description: ''
        type: boolean
        required: true
        label: 'stash enabled'
      - variable: gitlabRunner.persistence.stash.paused
        default: false
        description: ''
        type: boolean
        required: true
        show_if: gitlabRunner.persistence.stash.enabled=true
        label: 'stash paused'
      - variable: gitlabRunner.persistence.stash.schedule
        default: '0 0 * * *'
        description: ''
        type: string
        required: true
        show_if: gitlabRunner.persistence.stash.enabled=true
        label: 'stash schedule'
      - variable: gitlabRunner.persistence.stash.keepLast
        default: 30
        description: ''
        type: int
        required: true
        show_if: gitlabRunner.persistence.stash.enabled=true
        label: 'stash keep last'
      - variable: gitlabRunner.persistence.stash.restore.snapshot
        default: ''
        description: ''
        type: string
        required: false
        show_if: gitlabRunner.persistence.stash.enabled=true
        label: 'stash restore snapshot'
