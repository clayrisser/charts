# {{- $existingSecret := lookup "v1" "Secret" .Release.Namespace "credential-keycloak" }}
# apiVersion: v1
# kind: Secret
# metadata:
#   name: credential-{{ template "keycloak.name" . }}
#   labels:
#     app: {{ template "keycloak.name" . }}
#     chart: {{ .Chart.Name }}-{{ .Chart.Version }}
#     heritage: {{ .Release.Service }}
#     keycloak: {{ template "keycloak.name" . }}
#     release: {{ .Release.Name }}
# type: Opaque
# data:
# {{- if (and $existingSecret $existingSecret.data) }}
# {{- if $existingSecret.data.password }}
#   ADMIN_PASSWORD: {{ $existingSecret.data.ADMIN_PASSWORD }}
# {{- else }}
#   ADMIN_PASSWORD: {{ .Values.config.keycloak.password | default (randAlphaNum 24) | b64enc | quote }}
# {{- end }}
# {{- else }}
#   ADMIN_PASSWORD: {{ .Values.config.keycloak.password | default (randAlphaNum 24) | b64enc | quote }}
# {{- end }}
#   ADMIN_USERNAME: {{ printf "admin" | b64enc | quote }}
